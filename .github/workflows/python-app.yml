name: Add Two Numbers

on:
  workflow_dispatch:
    inputs:
      num1:
        description: 'Enter first number'
        required: true
        default: '5'
      num2:
        description: 'Enter second number'
        required: true
        default: '7'
      num3:
        description: ' Enter \n 1. Add \n 2.Sub \n 3.Mul \n 4.Divide'
        required: true
        default: '1'

jobs:
  run-add:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Run Script
        env:
          NUM1: ${{ github.event.inputs.num1 }}
          NUM2: ${{ github.event.inputs.num2 }}
          NUM3: ${{ github.event.inputs.num3 }}
        run: python calculator.py ${{ github.event.inputs.num1 }} ${{ github.event.inputs.num2 }} ${{ github.event.inputs.num3 }}

      - name: Run calculator.py
        id: run-script
        env:
          NUM1: ${{ github.event.inputs.num1 }}
          NUM2: ${{ github.event.inputs.num2 }}
          NUM3: ${{ github.event.inputs.num3 }}
        run: |
          result=$(python calculator.py | awk '/ans:/ {print $2}')
          echo "result=$result" >> $GITHUB_OUTPUT


      - name: Show result in summary
        run: echo "### The result is ${{ steps.run-script.outputs.result }}" >> $GITHUB_STEP_SUMMARY
